import{u as g,_ as u}from"./Api-d3ac84dd.js";import{r as v,o as S,a2 as C,c as d,S as w,G as f,K as x,y as t,I as a,ai as B,R as V,a3 as I,J as N,N as k,H as T,O as U,ay as A}from"./index-2abd0456.js";import{V as L,e as R,c as j}from"./VCard-6d91b3c2.js";import{V as z}from"./VSpacer-d994dc61.js";import{V as D}from"./VToolbar-5bcb7810.js";const E={style:{width:"100%"},class:"bg-black"},P={__name:"Backup",setup(G){const{post:_,data:o,error:c}=g(),r=v([]);v(!0);let m;S(()=>{i(),m=setInterval(()=>{i()},3e4)}),C(()=>clearInterval(m));const b=s=>!!r.value.find(e=>e.uuid===s.uuid),i=()=>_("lsblk"),p=d(()=>!!c.value),h=d(()=>{if(!o.value)return[];const s=u.first(o.value.result);return u.keys(s).map(n=>({key:n,title:u.capitalize(u.kebabCase(n)),removable:!0})).concat([{key:"status",title:"Status"}])}),y=d(()=>o.value?o.value.result:[]);return(s,e)=>{const n=w("v-data-table");return f(),x("div",E,[t(B,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),"multi-line":"",timeout:2e3,location:"top",color:"error"},{actions:a(()=>[]),default:a(()=>[V(I(N(c))+" ",1)]),_:1},8,["modelValue"]),t(L,{flat:"",class:"pt-6 pb-6 bg-black",theme:"dark",width:"100%",height:"70vh",rounded:"lg"},{default:a(()=>[t(R,null,{default:a(()=>[t(z),t(k,{color:"seconary",variant:"tonal",onClick:e[1]||(e[1]=l=>i()),icon:"mdi-refresh"})]),_:1}),t(j,null,{default:a(()=>[t(n,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value=l),"item-value":"uuid","return-object":"","select-strategy":"single",items:y.value,headers:h.value,"show-select":"showSelect"},{top:a(()=>[t(D,{elevation:8,title:"Select device for backup"},{default:a(()=>[r.value.length>0?(f(),T(k,{key:0,color:"primary"},{default:a(()=>[V("Run")]),_:1})):U("",!0)]),_:1})]),"item.status":a(({item:l})=>[t(A,{indeterminate:b(l),color:"yellow-darken-2"},null,8,["indeterminate"])]),_:2},1032,["modelValue","items","headers"])]),_:1})]),_:1})])}}};export{P as default};
